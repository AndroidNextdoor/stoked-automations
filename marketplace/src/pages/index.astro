---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const allPlugins = await getCollection('plugins');
const featuredPlugins = allPlugins.filter(p => p.data.featured);
const categories = [...new Set(allPlugins.map(p => p.data.category))].sort();
---

<Layout title="Claude Code Plugins - Supercharge Your Development">
  <!-- Hero Section with ASCII Art -->
  <pre class="ascii">
╔══════════════════════════════════════════════════════════════════╗
║                                                                  ║
║   ██████╗██╗      █████╗ ██╗   ██╗██████╗ ███████╗             ║
║  ██╔════╝██║     ██╔══██╗██║   ██║██╔══██╗██╔════╝             ║
║  ██║     ██║     ███████║██║   ██║██║  ██║█████╗               ║
║  ██║     ██║     ██╔══██║██║   ██║██║  ██║██╔══╝               ║
║  ╚██████╗███████╗██║  ██║╚██████╔╝██████╔╝███████╗             ║
║   ╚═════╝╚══════╝╚═╝  ╚═╝ ╚═════╝ ╚═════╝ ╚══════╝             ║
║                                                                  ║
║              PRODUCTION-READY PLUGINS FOR CLAUDE CODE           ║
║                                                                  ║
╚══════════════════════════════════════════════════════════════════╝
  </pre>

  <section>
    <p class="text-center">
      <strong>Production-ready plugins, MCP servers, and tools to enhance your development experience.</strong>
    </p>

    <div class="grid grid-1 mt-2 mb-2">
      <a href="#plugins" class="btn btn-primary">Browse Plugins</a>
      <a href="https://github.com/jeremylongshore/claude-code-plugins" class="btn">View on GitHub</a>
    </div>
  </section>

  <hr>

  <!-- Stats -->
  <section>
    <h2>Marketplace Stats</h2>

    <div class="grid grid-3">
      <div class="stat">
        <div class="stat-num">{allPlugins.length}</div>
        <div class="stat-label">Available Plugins</div>
      </div>
      <div class="stat">
        <div class="stat-num">{categories.length}</div>
        <div class="stat-label">Categories</div>
      </div>
      <div class="stat">
        <div class="stat-num">100%</div>
        <div class="stat-label">Open Source</div>
      </div>
    </div>
  </section>

  <hr>

  <!-- Featured Plugin: Overnight Dev -->
  <section id="overnight-dev">
    <h2>Featured: Overnight-Dev 🌙</h2>

    <div class="plugin-card">
      <h3>overnight-dev</h3>
      <p>
        <strong>Go to bed. Wake up to fully tested features.</strong> Run Claude autonomously for 6-8 hours overnight using Git hooks that enforce TDD.
      </p>
      <pre><code>/plugin install overnight-dev@claude-code-plugins</code></pre>
      <p>
        <span class="tag tag-featured">NEW</span>
        <span class="tag">Autonomous</span>
        <span class="tag">TDD</span>
        <span class="tag">Git Hooks</span>
      </p>
    </div>
  </section>

  <hr>

  <!-- Featured Plugins -->
  {featuredPlugins.length > 0 && (
    <section id="featured">
      <h2>Featured Plugins</h2>

      <div class="grid grid-3">
        {featuredPlugins.map(plugin => (
          <div class="plugin-card">
            <h3>{plugin.data.name}</h3>
            <p>{plugin.data.description}</p>
            <p>
              <span class="tag tag-featured">Featured</span>
              {plugin.data.keywords.slice(0, 2).map(keyword => (
                <span class="tag">{keyword}</span>
              ))}
            </p>
            <pre><code>{plugin.data.installation}</code></pre>
          </div>
        ))}
      </div>
    </section>
  )}

  <hr>

  <!-- Categories -->
  <section id="categories">
    <h2>Browse by Category</h2>

    <div class="grid grid-3">
      {categories.map(category => {
        const categoryPlugins = allPlugins.filter(p => p.data.category === category);
        return (
          <a href={`#${category}`} class="plugin-card">
            <h3>{category.replace('-', ' ')}</h3>
            <p>{categoryPlugins.length} plugin{categoryPlugins.length !== 1 ? 's' : ''}</p>
          </a>
        );
      })}
    </div>
  </section>

  <hr>

  <!-- All Plugins -->
  <section id="plugins">
    <h2>All Plugins</h2>

    <div class="grid grid-3">
      {allPlugins.map(plugin => (
        <div class="plugin-card">
          <h3>{plugin.data.name}</h3>
          <p>{plugin.data.description}</p>
          <p>
            <span class="tag">{plugin.data.category.replace('-', ' ')}</span>
            {plugin.data.keywords.slice(0, 3).map(keyword => (
              <span class="tag">{keyword}</span>
            ))}
          </p>
          <pre><code>{plugin.data.installation}</code></pre>
          <p><em>Version {plugin.data.version}</em></p>
        </div>
      ))}
    </div>
  </section>

  <hr>

  <!-- Installation Guide -->
  <section>
    <h2>Quick Start</h2>

    <table>
      <thead>
        <tr>
          <th>Step</th>
          <th>Command</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>1</strong></td>
          <td><code>/plugin marketplace add jeremylongshore/claude-code-plugins</code></td>
          <td>Add this marketplace</td>
        </tr>
        <tr>
          <td><strong>2</strong></td>
          <td><code>/plugin install plugin-name@claude-code-plugins</code></td>
          <td>Install any plugin</td>
        </tr>
        <tr>
          <td><strong>3</strong></td>
          <td><em>Use commands and agents</em></td>
          <td>Start using in Claude Code</td>
        </tr>
      </tbody>
    </table>
  </section>

  <hr>

  <!-- Features Diagram -->
  <section>
    <h2>Plugin Categories</h2>

    <pre class="diagram">
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  🔧 DevOps Automation    🔒 Security Tools                  │
│  ├─ Git workflows        ├─ Secret scanning                │
│  ├─ Docker helpers       ├─ Vulnerability checks           │
│  └─ CI/CD integration    └─ Compliance automation          │
│                                                             │
│  🌐 Fullstack Dev        🤖 AI/ML Integration               │
│  ├─ Frontend tools       ├─ Model deployment               │
│  ├─ Backend helpers      ├─ Data pipelines                 │
│  └─ Database utils       └─ Training workflows             │
│                                                             │
└─────────────────────────────────────────────────────────────┘
    </pre>

    <ul>
      <li><strong>Open Source</strong> - All plugins are MIT licensed</li>
      <li><strong>Community Driven</strong> - Submit your own plugins</li>
      <li><strong>Production Ready</strong> - Tested and documented</li>
      <li><strong>Free Forever</strong> - No paywalls, no subscriptions</li>
    </ul>
  </section>
</Layout>

<style>
  /* Diagram styling */
  .diagram {
    background: var(--ibm-blue-dark);
    color: var(--ibm-blue-light);
    border: var(--border-thickness) solid var(--ibm-blue);
    padding: var(--line-height);
    overflow-x: auto;
    font-size: 0.85rem;
    line-height: 1.3;
  }

  @media screen and (max-width: 640px) {
    .diagram {
      font-size: 0.65rem;
    }
  }
</style>
